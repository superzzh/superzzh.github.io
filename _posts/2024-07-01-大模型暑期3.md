---
title: LLM Lesson3
date: 2024-07-01 17:00:00 +0800
categories: [大语言模型应用, 暑期课程]
tags: [大模型]
---

# 欧冶金服-大模型应用与实践

## 大模型应用现状

toG：社交、消费...

toB：政务、医疗、网络、教育、办公...

达到奇点：大模型产生收益超过成本

与互联网泡沫不同：提升生产力

1. 模型
    - 国外已经形成围绕顶尖大模型的的应用生态
    - 国内从专注于基础大模型的研发，转向更多的应用落地
2. 数据
    - 互联网数据：低质数据，需要专业团队数据清洗
    - 标准化的数据，成本高
    - 企业数据：参差不齐
3. 算力
    - 进口算力被卡脖子
    - 国内算力，良品率低，性能、价格、模型适配成问题
4. 人才
    - 专注于大模型应用研发的人才较少
    - 需要具备AI与特定领域知识的复合型人才
5. 商业化
    - C端应用难以变现
    - B端用户落地难
        - 不知道如何落地（能做什么？）
        - 应用门槛高
        - 目标是降本（人力成本）（国企避讳裁员），而不是开源

- 大模型应用技术发展路径
    - 简单提示
    - 工作链
    - 智能体：规划任务、使用工具、执行操作
    - 多智能体：多个智能体的协作

冯诺依曼GPU->近存计算GPU->存算训一体芯片->生物仿生

- 大模型主要方向
    - 情感分析
    - 文本分类
    - 关键词提取
    - 自然语言生成

## 大模型应用实践：欧冶金服智能应用平台

### AI场景服务构建-知识库应用
1. 索引
    - 加载器（Loader）：从知识库中加载文档。
    - 分割器（Splitter）：将文档拆分成多个小片段（Document Snippets）。
    - 向量化（Embedding）：将文档片段向量化后，存储文档片段及其向量。
2. 检索
    - 用户提出问题，“如何做...？”
    - 向量化（Embedding）：将问题转换为向量，根据“接近度”查询，从数据库中找到相关片段（Relevant Snippets）。
3. 增强答案生成
    - 大语言模型（LLM）：使用相关片段生成最终答案，并返回给用户。

![Desktop View](/images/LLM-Lesson3/RAG.png){: width="972" height="589" }

相关介绍<https://scriv.ai/guides/retrieval-augmented-generation-overview/>

### AI场景服务构建-知识库管理

日常工作中涉及大量解答用户产品问题的工作，通过搭建用户手册问答机器人，可以大大提升沟通与工作效率。

![Desktop View](/images/LLM-Lesson3/问答.jpg){: width="972" height="589" }

用户输入的问题被转换成向量，在向量数据库中进行向量搜素，搜索到与问题最相似的N个向量对应的文本段落，再把问题与这些文本段落一同传递给大语言模型，由大语言模型给出答案。

以下是一个示例

```text
项目概况:
工程情况与招标范围
2.1招标项目名称:重钢西昌矿业有限公司选矿车间厂区(转山村八组)隔声降噪工程
2.2建设地点:四川省西昌市太和镇
2.3建设规模:约1414万元(含税)
2.4计划工明:150日历天
2.5招标范围:
按照招标文件及提供的相关材料，完成选矿车间厂区(转山村八组)隔声降噪招标工程量清单和图纸等所涉及的内容
```

```text
根据项目概况，按以下步骤一步一步执行:
第一步:判断总承包序列资质
- 本项目建设内容关键词为“隔声降噪工程”，不属于《建筑业工程施工企业资质标准》中的施工总承包序列资质标准，因此本项目不需要总承包序列。
第二步:判断专业承包序列资质
- 本项目建设内容为“隔声降噪工程”，属于环保工程专业承包序列，因此本项目需要环保工程专业承包序列资质。
第三步:判断劳务分包序列资质
- 本项目需要进行隔声降噪工程施工，需要劳务分包序列中的施工劳务
第四步:判断总承包资质等级
- 由于本项目不需要总承包序列，因此不需要判断总承包资质等级
第五步:判断专业序列资质等级
- 本项目为隔声降噪工程，属于噪声与振动治理类别，根据《环保工程规模划分表》，本项目投资额为1414万元，属于大型项目，对应一级资质
第六步:输出结果
- 本项目需要的资质为:“专业承包·环保工程并且【施工劳务】”
```

>知识库应用的优点
{: .prompt-tip }

1. 增强知识库
    RAG模型可以利用外部知识库，通过检索相关信息来补充生成大模型的知识盲点，从而生成更准确和信息丰富的回答。
2. 动态更新
    由于RAG依赖于检索机制，可以动态更新知识库内容，确保模型生成的内容是最新的。这在快速变化的领域(如新闻、科技等)尤为重要。
3. 高效处理长文本
    通过检索机制，可以有效处理长文本或复杂问题，将相关片段提取出来，再进行生成，这减少了模型需要处理的上下文长度，提高了生成效率和准确性。
4. 降低计算成本
    相较于纯生成模型，RAG可以减少对模型参数的依赖，通过检索阶段过滤无关信息，从而降低计算成本和训练复杂度。

>知识库应用的缺点
{: .prompt-danger }

1. 依赖检索质量
    RAG的性能高度依赖于检索阶段的质量，如果检索到的相关信息不准确或不相关，会直接影响生成结果的质量。
2. 复杂性增加
    结合检索和生成两种机制，使得系统架构更加复杂，开发和调试成本增加，需要优化检索算法和生成模型之间的协作。
3. 实时性问题
    检索阶段可能增加响应时间，尤其是在处理大规模数时，可能能响实时性能。
4. 知识库维护
    知识库需要不断更新和维护，以确保检索信息的准确性和时效性这增加了额外的运营和维护成本。

### AI场景服务构建-文本要素提取

![Desktop View](/images/LLM-Lesson3/提取.jpg){: width="972" height="589" }

要素提取的目标任务是:利用大语言模型对上传的不同格式的合同文本进行 Key value 信息的提取，输出结构化的结果，如JSON文本

示例如下：

```text
2.1 本合同项下的贷款为人民币信托贷款。
2.2 贷款人分期发行信托计划项下的信托单位募集资金，并根据信托单位的实际发行情况以募集的信托资金为限分两期向借款人发放信托贷款，拟募集总金额不超过人民币伍亿元(RMB500,000.000)，首期贷款金额不超过人民币贰亿伍仟万元(RMB250,000.000)，第二期贷款的款金额不超过人民币贰亿伍仟万元(RMB 250,000,000)。为免疑问，贷款人有权根据信托计划项下信托单位发行资金规模调整实际贷款金额。贷欧人有权根据实际情况自行决定将首期贷款及第二期贷款各自分为多笔贷款发放给借款人，该等贷款的笔数、实际金额由贷款人根据实际情况自行决定(以下称为“每笔贷款”)。
2.3 本合同项下每笔发放的贷款之用款期限均限为36个月，自每笔贷款的实际放款日开始计算，实际放款日以借款借据为准，借款借据为本合同不可分割的组成部分，”
请从以上文本中提取以下要素并用Json格式返回:“币种”(显示为iSO代码)，“信托计划总规模”(只显示数值)，“第一期放款金额”(只显示数值)，“第二期放款金额”(只显示数值)，“第一期贷款期限”(按年显示)，“第二期贷款期限”(按年显示)。
```

```json
{
    "币种":"CNY",
    "信托计划总规模":"50000000",
    "第一期放款金额":"25000000",
    "第二期放款金额":"25000000",
    "第一期贷款年限":"3年",
    "第二期贷款年限":"3年"
}
```

### AI场景服务构建-智能审核

![Desktop View](/images/LLM-Lesson3/审核.jpg){: width="972" height="589" }

- 文件审核服务流程，以代理组件为核心，代理组件是代表人类进行决策和行动的数字实体，代理可视为智能机器人，由控制端、感知端核行动端组成。
    - 控制端：对接大语言模型，提供拥有自然语言处理、知识存储、逻辑推理以及泛化的能力。
    - 感知端：负责从外部接收各种输入包括PDf、Word、Excel和图片文件的上传，也支持手工输入指今
    - 行动端：根据控制端的指令调用不同的工具，如:从向量数据库召回信息，调用网络搜索或科学计算等，并产生相应的输出。

示例如下：用户上传文档并解析完成后，智能体组件会自动逐个检验预置的审核规则，并且每条规则自行选择调用哪个工具(一个或多个)进行规则检验，并将最终的审核结果拼接在一起生成审校报告。

```text
1.提取这份合同的名称、合同编号
2.提取这份合同中的签订日期
3.提取这份合同的有效期
4.提取合同总金额、不含税总价、含税总价
5.提取这份合同的中的甲方、乙方
6.提取这份合同的产品名称、规格、单价和数量
7.提取这份合同的合同章是否为红章？
8.提取这份合同的交货期
9.提取这份合同的提（交）货方式
10.提取这份合同的运输方式和费用分组
11.提取这份合同的包装方式、包装标准、包装费用和费用承担
12.提取这份合同分批交付的时间、数量、金额
13.提取这份合同的付款方式、付款期限、发票开具要求
```

### AI场景服务构建-报告生成

报告生成使用Report组件，Report组件中可以在线定义docx格式的报告模板，并连接智能审核或要素提取类的服务，根据智能审核和要素提取的结果，生成可供下载的报告文件。

![Desktop View](/images/LLM-Lesson3/报告.jpg){: width="972" height="589" }

示例如下：

```text
1.该股票历史行情如何？近几天行情如何？
......
2.该股票基本面如何？盈利能力如何？
......
3.该股票可持续发展能力如何？是否有竞争优势？
......
```

### AI场景服务构建-语音处理

智能平台不仅能提供基础的文本输出，同时，还可以进行更深入的文本处理功能。例如，平台可以对转换得到的文本进行内容总结，这对于希望快速把握语音文件主旨的用户来说非常有帮助，通过使用大语言型识别文本中的关键信息和主要观点，从而生成简洁明了的总结。

情感分析则是另一个重要的功能，通过情感分析，平台可以识别和分析文本中的情绪倾向，例如判断内容是正面的、负面的还是中性的。这对于分析客户反馈社交媒体互动或任何需要理解语音背后情绪的场合尤其有价值。

示例如下：

```text
真实客服通话记录
1 00:00:00,000->00:00:03,960 您好,您好,您好,是中叶长天国际吗?
2 00:00:05,000->00:00:05.480 是的
3 00:00:05,480->00:00:08,840 您好,我这边是欧冶金股通宝平台的
4 00:00:08,840->00:00:17,380 来电视回访一下,您这边持有的通宝是考虑到期兑付还是贴现或者流转呢?
5 00:00:20,480-->00:00-25,420 可能会流转吧,也有一部分可能会等到期吧
6 00:00:25,420->00:00:28,500 那您操作上有遇到什么问题吗?
7.00:00:28,500->00:00:30.220 没有
8 00:00:30,220-->00:00:37,400 好的,或许如果有操作上遇到问题,到时候也可以联系我们
9 00:00:37.400->00:00:39.160 好的
10 00:00:39,160--> 00:00:40,980 好,感谢接听,再见
11 00:00:40,980--> 00:00:42.400 好拜拜
```

```text
判断：录音中是否有不友好的情况发生？
根据提供的录音内容，没有发现不友好的情况发生，录音中，双方进行了礼貌的交流，询问了关于通宝平台的招关问题，并提供了帮助和支持，整个对话过程是平和且专业的。
```

### 与业务系统对接-API方式

通过对接大语言应用平台API，业务系统不仅可以获得强大的自然语言处理、生成和分析能力，还能借助人工智能技术提升运营效率、优化决策流程、增强客户服务体验等，从而充分释放人工智能的创新潜力，为企业注入新的生产力动能，成为提升竞争优势的关键抓手。

在业务流程中引入大模型API如下：

![Desktop View](/images/LLM-Lesson3/对接.jpg){: width="972" height="589" }

### 数据安全（国企背景下）

- 将数据分为三个层次
    - 市场公开数据：直接用ChatGPT或国产通用大模型
    - 普通密级文件：脱敏处理，调用国产大模型
    - 隐私数据：本地大模型

脱敏处理
: 欧冶金服智能应用平台，通过自定义的脱敏组件，自动对机构名称、电话、网址、账号、日期、地址、人名等敏感信息进行加，解密处理:将脱敏处理后的文本提交Azure OpenAl，并对OpenAl返回的结果进行解密处理，从而有效避免了敏感信息外泄的风险。(脱敏方案已经通过了公司风控部的确认)

![Desktop View](/images/LLM-Lesson3/脱敏.jpg){: width="972" height="589" }

- 数据库隔离
    - 使用Python方法取数据，而不是让大模型访问数据库

### 创新应用研究

- 多代理应用研究
    - 多代理应用的研究将集中于如何利用大型语言模型来协调多个智能代理协同工作，目标是通过这些智能代理的紧密合作，来处理更复杂的需求并在多种业务场夏中提供创新解决方案。
    - 应用场景
        - 在线协作平台:例如，在一个软件开发项目中，不同的开发者或团队可以作为代理，他们基于项目的需求、进度和工作分工独立执行任务，通过代理之间的协作和通信，产出各自的交付物。
        - 供应益管理:在复杂的供应链管理系统中，不同的角色(如供应商、分销商、零售商)可以被视为独立的代理。这些代理根据库存水平需求预测、运输成本等因系进行交互和协调，以优化整个供应链的效率和成本。
        - 风险管理和评估:在金融领域中，多Agent系统可以用于风险管理和评估，特别是在信贷风险，市场风险和操作风险营理方面，智脑体可以代表不同的金融实体(如银行、保险公司，投资者等)，通过模拟这些实体的交互，可以更好地理解和评估潜在的风险。

- 多模态大模型应用研究
    - 多模态大语言模型助合了文本、图像、声音及视频等多种数据类型的处理能力，在各种领域都有广泛的应用前景。业界已经形成共识:多模态的任何一小步，都会成为产业应用的一大步。
    - 应用场景
        - 图像语音识别与生成:图像识别和语音识别在很多领域中都有着广泛的应用。比如，有些交互式机器人就能够通过获取用户的视顾和语音信息，来感知用户的情感和需要，并做出相应的回应。这就需要同时使用图像识别和语音识别技术，将来自不同类型的数据源的信息结合起来，从而更准确的解析出用户的请求。
        - APA应用研究:传统的RPA难以胜任需要类人智能的任务，尤其在工作流构造的精细设计和工作流执行中的动态决策，随着具备了类人智能的大语言模型(LLM) 的出现，利用基于多模态LLM的智能体来处理高级自动化，旨在根据人类指令构建工作流，并通过协调专门的智能体来做出复杂的决策，以实现代理过程目动化(APA)。

### 成功案例

智能助手、保理业务智能审核、中登网排查、铁矿石研报生成

![Desktop View](/images/大模型暑期课/LLM-Lesson3/智能小助手.jpg){: width="972" height="589" }

![Desktop View](/images/大模型暑期课/LLM-Lesson3/保理审核.jpg){: width="972" height="589" }

![Desktop View](/images/大模型暑期课/LLM-Lesson3/中.jpg){: width="972" height="589" }

![Desktop View](/images/大模型暑期课/LLM-Lesson3/研报.jpg){: width="972" height="589" }







