---
title: 实证因子检验
date: 2024-07-16 12:00:00 +0800
categories: [策略研究, 因子投资]
tags: [量化投资]
math: true
---

## 因子数据分析

### 数据预处理

因子的预处理对因子的效果有非常明显的影响，一般对因子的预处理包括缺失值填补、异常值处理等。

缺失值填补，一般填0或者填横截面均值，财务数据一般向前填充。

- 异常值处理包括异常样本的处理和离群值的处理
    - 异常样本包括新股、ST、PT等。比如新股可以定义为上市未满一年的股票，去掉每一期的新股和PT、ST等股票，有时也会考虑ST摘帽不满一年也踢掉。
    - 离群值为一些非常大或者非常小远超出正常范围的值，异常值产生的原因千奇百怪，这里不做总结，这里对离群值处理直接做winsor，即超出5%和95%分位数的点，拉到这两个分位点 。

### 因子描述性统计

可以从因子的分布视角分析：

1. 因子按时间分布
    - 年度
    - 月度
    - 日度
2. 因子按行业分布
    - 分析哪些行业的因子暴露度高
    - 与IC行业分布结合起来看

可以从因子自相关性视角分析，这是因子的时序特征。

因子的自相关性主要是反映因子整体的稳定性，或者说因子的动量特征，如果因子的正自相关性很高，说明这个因子的持续性会很好，强者恒强，可以合理预期组合的换手会很低，负相关性很高则反之。

### 因子中性化

因子中性化主要是为了剔除因子在行业和市值上的特异性，让因子在行业和市值上可比。每个行业的因子大小和稳定性是有明显差异的，所以如果直接构建组合，结果会明显集中于部分行业。

有时除了这两个之外，也会考虑更多因素，做一些风格中性化，或者说正交化。

- 中性化操作有两种
    - 用因子值对市值和行业虚拟变量做回归，取回归的残差，因为回归残差和自变量之间是相互正交的

        $$Factor_i = \sum_{j=1}^{n} \beta_j Industry_{j,i} + \sigma_i$$

        其中，$Factor_i$为股票$i$的因子，$Industry_{j,i}$为行业虚拟变量，若股票$i$属于行业$j$，则为1，否则为0。

    - 对行业虚拟变量回归去残差和在行业内减去均值，除以标准差
    - 两者的效果是一样的

## IC分析

### 信息系数IC与信息比率IR

因子的信息系数IC(Information Coefficient)定义为因子值和股票未来某一期的收益率之间的相关关系，即有：$IC = Corr(r_{t+n},f_t)$，这里是Pearson相关系数。

又为了防止因子值当中的异常值对IC造成影响，引入Spearman相关系数方式计算IC，称为RankIC，这是非参数统计中的秩相关系数，计算方法如下:

$$\rho = \frac{\sum_{i=1}^{N} (r(x_i)-\overline(r(x)))(r(y_i)-\overline(r(y)))}{\sqrt(\sum_{i=1}^{N}(r(x_i)-\overline(r(x)))^2 \sum_{i=1}^{N}(r(x_i)-\overline(r(x))^2))}$$

经过简化后，可得：

$$\rho = 1 - \frac{6 \sum_{i=1}^{N} d_i^2}{N(N^2-1)}$$

其中，$d_i = r(x_i)-r(y_i)$

因子的信息比率IR(Information Ratio)，是因子IC的均值与标准差之比，代表因子获取稳定Alpha的能力。

### IC信号衰减

因子所包含的信息在市场当中有时效性，一般情况下，随着时间的之后，因子的IC值会逐步下降。

IC信号衰减可以通过计算当前因子值与滞后n期的收益率计算，一般用IC半衰期来衡量IC衰减的快慢，即IC降为当前值一半所滞后的期数。

## 收益分析

### 回归法

根据套利定价模型(APT)：

> 一项资产的价格由不同因素驱动，将这些因素分别乘上其对资产价格影响的贝塔系数，加总后再加上无风险收益率，就可以得出该项资产的价值。

$$E(R_i^t) = \alpha + \beta_1 \lambda_1 + \beta_2 \lambda_2 + ... + \beta_n \lambda_n$$

这里$\beta$就是因子暴露，用因子值代替。回归后得到$\lambda$的估计值，即为因子收益。

### 模拟组合法

用因子值构建投资组合，用投资组合的实际收益率，作为因子收益率的估计值。一般使用纯多头或者多空收益率作为因子收益率的估计值。

实践中，常见做法是将股票按照因子值大小分层，每一层的股票构成投资组合。计算每一层投资组合的收益率，好的因子应该会有区分明显、并且单调分层的收益率曲线。

- 多空收益率
    - 将股票分组后，将因子值最大组收益率-因子值最小组收益率，得多空收益率
    - A股做空难

- 换手率
    - 一段时间内转手买卖股票的频率

- 分层收益率
    - 股票每一层构成的投资组合的收益率